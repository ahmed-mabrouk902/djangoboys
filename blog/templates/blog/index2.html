{% load static %}

<!DOCTYPE html>
<html lang="en">


<head>
    <meta name="viewport" content="width=1024">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="favicon.png" rel="icon" type="image/png">
    <title>Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'assets\css\icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets\css\uikit.css' %}">
    <link rel="stylesheet" href="{% static 'assets\css\style.css' %}">
    <link rel="stylesheet" href="{% static 'assets\css\tailwind.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/7103afc328.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>

    <style>

    </style>

<body>
    <header style="position: fixed; padding-left: 100px; ">
        <div class="header_inner" style=" margin: 10px;">
            <a href="/"><i class="fa-solid fa-house"></i></a>
            <form action="search" method="POST" style="padding-left: 30%;">
                {% csrf_token %}
                <div class="left-side" style="width:80%;">
                    <input type="text" class="search-bar" name="username" placeholder="Search for username..">
                    <button class="search-btn" style="color:#007BFF;" type="submit"><i
                            class="fa fa-search fa-1x "></i></button>
                </div>
            </form>
            <div class="right-side lg:pr-4">
                <!-- upload -->
                <a href="/" class="btn btn-outline-primary">Show Posts</a>
                <a href="#" class="btn btn-outline-primary">
                    <ion-icon name="add-circle" style="width: 100%;"></ion-icon> Upload Post
                </a>
                <!-- upload dropdown box -->
                <div uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small"
                    class="header_dropdown">

                    <div class="flex justify-center flex-center text-center">

                        <div class="flex flex-col choose-upload text-center">
                            --------------------------------
                            <!--post a post-->
                            <form action="upload" method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                <p class="my-3 leading-6"> Upload pics</p>
                                <div>
                                    <input type="file" name="image_upload" class="button soft-warning small">
                                    <textarea class="button soft-warning small" name="caption"
                                        placeholder="caption..."></textarea>
                                    <br>
                                    <button class="btn btn-outline-primary" type="submit">Upload Post</button>

                                </div>

                            </form>
                            --------------------------------
                            <!--post a comment -->
                            <form action="uploadcap" method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                <p class="my-3 leading-6"> Upload comment</p>
                                <div>
                                    <textarea class="button soft-warning small" name="caption"
                                        placeholder="caption..."></textarea>
                                    <button class="btn btn-outline-primary" type="submit">Upload</button>

                                </div>

                            </form>
                            <!--<a href="#" class="uk-text-muted mt-3 uk-link"
                                    uk-toggle="target: .choose-upload ;  animation: uk-animation-slide-right-small, uk-animation-slide-left-medium; queued: true">
                                    Or Import Video </a>-->

                        </div>
                    </div>

                </div>
                <!--group event-->
                <a href="#" class="btn btn-outline-primary">
                    <ion-icon name="add-circle" style="width: 100%;"></ion-icon> Create Group
                </a>
                <!-- upload dropdown box -->
                <div style="width: 25%; height: 600px; overflow-y: auto;border-radius: 5px;"
                    uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small"
                    class="header_dropdown">

                    <!-- notivication header -->
                    <div class="px-4 py-3 -mx-5 -mt-4 mb-5 border-b">
                        <h4>add event</h4>
                    </div>

                    <!-- notification contents -->

                    <div class="flex justify-center flex-center text-center">

                        <div class="flex flex-col choose-upload text-center">

                            <div
                                class="bg-gray-100 border-2 border-dashed flex flex-col h-24 items-center justify-center relative w-full rounded-lg  ">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                    class="w-12">
                                    <path
                                        d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z" />
                                    <path d="M9 13h2v5a1 1 0 11-2 0v-5z" />
                                </svg>
                            </div>
                            <!--post to post-->
                            <form action="groups" method="POST" enctype="multipart/form-data">
                                {% csrf_token %}

                                <p class="my-3 leading-6"> add photo</p>
                                <div>
                                    <input type="file" name="image_upload1" class="button soft-warning small">
                                    <br>
                                    Activity :
                                    <select name="Activity">
                                        <option value="Football" selected>Football</option>
                                        <option value="Volleyball">Volleyball</option>
                                        <option value="Beach Tennis">Beach Tennis</option>
                                        <option value="Diving">Diving</option>
                                        <option value="Fishing">Fishing</option>
                                        <option value="Camping">Camping</option>
                                        <option value="Beach Yoga">Beach Yoga</option>
                                        <option value="Beach clean up">Beach clean up</option>
                                    </select>
                                    <br>
                                    Location :
                                    <select name="Location">
                                        <option value="Hassen beach" selected>Hassen beach</option>
                                        <option value="Chatmemi beach">Chatmemi beach</option>
                                        <option value="Swisri beach">Swisri beach</option>
                                        <option value="kef lasfer beach">kef lasfer beach</option>
                                        <option value="Ain Mestir beach">Ain Mestir beach</option>
                                        <option value="Rafraf beach">Rafraf beach</option>
                                    </select>
                                    <br>
                                    <input type="text" name="name" class="button soft-warning small"
                                        placeholder="group name">
                                    <br>
                                    <textarea class="button soft-warning small" name="description"
                                        placeholder="description..."></textarea>
                                    <br>
                                    <label for="startat">starts at (date and time):
                                        <input type="datetime-local" id="startat" name="startat"></label>

                                    <label for="finishat">finish at (date and time):
                                        <input type="datetime-local" id="finishat" name="finishat"></label>

                                    <br>
                                    <button class="button bg-blue-700" type="submit">Upload</button>
                                    {% if messages %}

                                    {% for message in messages %}
                                    <script>
                                        swal(
                                            "Error!",
                                            "{{message}}",
                                            "error"

                                        );
                                    </script>

                                    {% endfor %}

                                    {% endif %}
                                </div>

                            </form>
                            <!--<a href="#" class="uk-text-muted mt-3 uk-link"
                                uk-toggle="target: .choose-upload ;  animation: uk-animation-slide-right-small, uk-animation-slide-left-medium; queued: true">
                                Or Import Video </a>-->
                        </div>



                    </div>

                    <div class="px-4 py-3 -mx-5 -mb-4 mt-5 border-t text-sm">
                        Your image size Must be Maxmium 999MB
                    </div>
                </div>
                <!--end group event-->

                <!-- Notification -->
                <!-- <a href="#" class="header-links-item">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet"
                        viewBox="0 0 24 24">
                        <g fill="none">
                            <path
                                d="M12 22a2.02 2.02 0 0 1-2.01-2h4a2.02 2.02 0 0 1-.15.78a2.042 2.042 0 0 1-1.44 1.18h-.047A1.922 1.922 0 0 1 12 22zm8-3H4v-2l2-1v-5.5a8.065 8.065 0 0 1 .924-4.06A4.654 4.654 0 0 1 10 4.18V2h4v2.18c2.579.614 4 2.858 4 6.32V16l2 1v2z"
                                fill="currentColor" />
                        </g>
                    </svg>
                </a>
                <div uk-drop="mode: click;offset: 4" class="header_dropdown">
                    <h4 class="-mt-5 -mx-5 bg-gradient-to-t from-gray-100 to-gray-50 border-b font-bold px-6 py-3">
                        Notification </h4>
                    <ul class="dropdown_scrollbar" data-simplebar>
                        <li>
                            <a href="#">
                                <div class="drop_avatar"> <img src="{% static 'assets/images/avatars/avatar-1.jpg' %}"
                                        alt="">
                                </div>
                                <div class="drop_content">
                                    <p> <strong class="text-link">Taiye</strong>
                                        <span class="text-link"> is following you </span>
                                    </p>
                                    <span class="time-ago"> 2 hours ago </span>
                                </div>
                            </a>
                        </li>


                    </ul>
                    <a href="#" class="see-all">See all</a>
                </div>
-->

                <!-- Messages -->

                <!--<a href="#" class="header-links-item">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        aria-hidden="true" role="img" width="0.5em" height="0.5em" preserveAspectRatio="xMidYMid meet"
                        viewBox="0 0 16 16">
                        <g fill="currentColor">
                            <path
                                d="M2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
                        </g>
                    </svg>
                </a>
                <div uk-drop="mode: click;offset: 4" class="header_dropdown">
                    <h4 class="-mt-5 -mx-5 bg-gradient-to-t from-gray-100 to-gray-50 border-b font-bold px-6 py-3">
                        Messages </h4>
                    <ul class="dropdown_scrollbar" data-simplebar>
                        <li>
                            <a href="#">
                                <div class="drop_avatar"> <img src="{% static 'assets/images/avatars/avatar-1.jpg' %}"
                                        alt="">
                                </div>
                                <div class="drop_content">
                                    <strong> Taiye </strong> <time> 6:43 PM</time>
                                    <p> hi tomi </p>
                                </div>
                            </a>
                        </li>



                    </ul>
                    <a href="#" class="see-all">See all</a>
                </div>-->

                <!-- profile -->

                <a href="#">
                    <img src="{{user_profile.profileimg.url}}" style="object-fit: cover; " class="header-avatar" alt="">
                </a>
                <div uk-drop="mode: click;offset:9" class="header_dropdown profile_dropdown border-t">
                    <ul>
                        <li><a href="profile\{{user_profile}}"> Profile </a> </li>
                        <li><a href="settings"> Account setting </a> </li>
                        <!--<li><a href="index"> Go to Website </a> </li>-->
                        <li><a href="logout"> Log Out</a></li>
                    </ul>
                </div>

            </div>
        </div>
    </header>
    <br><br>
    <div class="container m-auto">

        <!--<h1 class="lg:text-2xl text-lg font-extrabold leading-none text-gray-900 tracking-tight mb-5"> Feed </h1>--->

        <div class="lg:flex justify-center lg:space-x-10 lg:space-y-0 space-y-5">

            <!-- left sidebar-->
            <div class="space-y-5 flex-shrink-0 lg:w-7/12">
                <!-- post 1-->
                {% for post in posts reversed %}
                <div class="bg-white shadow rounded-md  -mx-2 lg:mx-0">

                    <!-- post header-->
                    <div class="flex justify-between items-center px-4 py-3">
                        <div class="flex flex-1 items-center space-x-4">
                            <!-- <a href="#">
                                <div class="bg-gradient-to-tr from-yellow-600 to-pink-600 p-0.5 rounded-full">
                                    <img src="{% static 'assets/images/avatars/avatar-2.jpg' %}"
                                        class="bg-gray-200 border border-white rounded-full w-8 h-8">
                                </div>
                            </a>-->
                            <span class="block capitalize font-semibold "><a href="/profile/{{post.user}}"
                                    style="object-fit: cover;">@{{post.user}}</a>
                                <h1 style="font-size:10px;">{{post.created_at}}</h1>
                            </span>

                        </div>

                        <div>
                            {% if post.user == request.user.username %}
                            <a href="#"> <i class="fa-solid fa-ellipsis fa-2x"></i></a>
                            <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100  "
                                uk-drop="mode: click;offset:9;pos:bottom-center">

                                <ul class="space-y-1">
                                    <!-- dude
                                        <li>
                                        <a href="#"
                                            class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                                            <i class="uil-share-alt mr-1"></i> Share
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#"
                                            class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                                            <i class="uil-edit-alt mr-1"></i> Edit Post
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#"
                                            class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                                            <i class="uil-comment-slash mr-1"></i> Disable comments
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#"
                                            class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md ">
                                            <i class="uil-favorite mr-1"></i> Add favorites
                                        </a>
                                    </li>
                                    <li>
                                        <hr class="-mx-2 my-2 ">
                                    </li> 
                                
                                
                                
                                duuuude-->

                                    <li>
                                        <a href="/deleteCustGrp?id={{post.id}}"
                                            class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md ">
                                            <i class="uil-trash-alt mr-1"></i> delete post
                                        </a>
                                    </li>
                                </ul>

                            </div>
                            {% endif %}
                        </div>
                    </div>

                    {% if post.image.url == NULL %}
                    <h4 class="flex justify-between items-center px-3 py-0">Group's name: {{post.name}}<br> Discription:
                        {{post.caption}}<br> Starts at {{post.starts_at}} <br> Ends at {{post.finish_at}}<br> Activity :
                        {{post.activity}}<br> Location : {{post.location}}</h4>

                    {% else %}
                    <h6 class="flex justify-between items-center px-4 py-0">Group's name: {{post.name}}<br> Discription:
                        {{post.caption}}<br> Starts at {{post.starts_at}} <br> Ends at {{post.finish_at}}<br> Activity :
                        {{post.activity}}<br> Location : {{post.location}}</h6>
                    {% endif %}
                    <div uk-lightbox>

                        <a href="{{post.image.url}}">
                            <img src="{{post.image.url}}" alt="">
                        </a>
                    </div>




                    <div class="py-3 px-4 space-y-3">
                        {% if post.image.url == NULL %}
                        <div class="flex space-x-4 lg:font-bold">
                            <a href="/Jgroup?post_id={{post.id}}"><i class="fa-solid fa-user"></i></a>
                            <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100  "
                                uk-drop="mode: hover;pos: top-right">

                            </div>
                            {% if post.no_of_likes == 1 %}
                            <h4 class="flex justify-between items-center px-0 py-0">one member</h4>
                            {% else %}
                            <p class="flex justify-between items-center px-0 py-0"> {{post.teammates}} member</p>
                            {% endif %}


                        </div>

                        {% else %}
                        <div uk-lightbox>

                        </div>
                        <div class="flex space-x-4 lg:font-bold">

                            <a href="/Jgroup?post_id={{post.id}}"><i class="fa-solid fa-user"></i></a>

                            {% if post.teammates == 0 %}
                            <p class="flex justify-between items-center px-0 py-0">no member</p>
                            {% elif post.teammates == 1 %}
                            <p class="flex justify-between items-center px-0 py-0">one member</p>
                            <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100  "
                                uk-drop="mode: hover;pos: bottom-center" style="opacity: 0.5;">
                                {% for personne in join_group %}
                                {% if personne.post_id == post.id %}
                                <a href="/profile/{{personne.username}}">{{personne.username}}</a><br>
                                {% endif %}
                                {% endfor %}
                            </div>
                            {% else %}
                            <p class="flex justify-between items-center px-0 py-0"> {{post.teammates}} member</p>
                            <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100  "
                                uk-drop="mode: hover;pos: bottom-center" style="opacity: 0.5;">
                                {% for personne in join_group %}
                                {% if personne.post_id == post.id %}
                                <a href="/profile/{{personne.username}}">{{personne.username}}</a><br>
                                {% endif %}
                                {% endfor %}
                            </div>
                            <div style=" padding-left: 350px;">
                                <a href="{{post.image.url}}" download>
                                    <i class="fa-solid fa-download"></i>
                                </a>
                            </div>
                            {% endif %}

                            <!--save-->



                        </div>
                        {% endif %}
                        {% comment %} comment section of a post {% endcomment %}
                        <form method="post" action="/comment?post_id={{post.id}}">
                            {% csrf_token %}
                            <div class="bg-gray-100 bg-gray-100 rounded-full rounded-md relative ">
                                <input type="text" name="comment" placeholder="post a comment"
                                    class="bg-transparent max-h-10 shadow-none">
                            </div>
                        </form>
                        {% if post.id in feedCM %}
                        <div style="width: 100%; height: 125px; overflow-y: auto;border-radius: 5px;">
                            {% for C in comment %}
                            {% if C.post_id == post.id %}
                            <div class="border-t pt-2 space ">
                                <div class="flex">
                                    <a href="/profile/{{C.auther}}"
                                        style="margin-bottom: 10px;padding: 5px 10px;">@{{C.auther}} :</a>
                                    <div
                                        style="background-color: #1877f2;color:white;border-radius: 50px;margin-bottom: 10px;padding: 5px 10px;">
                                        "{{C.com}}"
                                    </div>
                                    <h1 style="font-size:10px;">{{C.created_at}}</h1>
                                </div>
                            </div>
                            {% endif %}
                            {% endfor %}
                        </div>
                        {% endif %}

                    </div>
                </div>
                {% endfor %}

            </div>

            <!-- right sidebar-->
            <div class=" left-side lg:w-5/12">
                <div class="bg-white  shadow-md rounded-md overflow-hidden" style=" border-radius:15px;">

                    <div class="bg-gray-50  border-b border-gray-100 flex items-baseline justify-between py-4 px-6 ">
                        <h2 class="font-semibold text-lg">Users You Can Follow :</h2>
                    </div>

                    <div class="divide-gray-300 divide-gray-50 divide-opacity-50 divide-y px-4 ">
                        {% for suggestion in suggestions_username_profile_list %}
                        <div class="flex items-center justify-between py-3">
                            <div class="flex flex-1 items-center space-x-4">
                                <img src="{{suggestion.profileimg.url}}" class="bg-gray-200 rounded-full w-10 h-10"
                                    style="object-fit: cover;">

                                <div class="flex flex-col">
                                    <span class="block capitalize font-semibold">{{suggestion.user}} </span>
                                    <span class="block capitalize text-sm"> {{suggestion.bio}} </span>
                                </div>
                            </div>

                            <a href="profile/{{suggestion.user}}" class="btn btn-outline-primary"> View Profile</a>
                        </div>
                        {% endfor%}

                    </div>
                    {% comment %} <div
                        class="bg-gray-50  border-b border-gray-100 flex items-baseline justify-between py-4 px-6 ">
                        <h2 class="font-semibold text-lg">Users You are Following : </h2>
                    </div>

                    <div class="divide-gray-300 divide-gray-50 divide-opacity-50 divide-y px-4 ">
                        {% for F in following %}
                        <div class="flex items-center justify-between py-3">
                            <div class="flex flex-1 items-center space-x-4">
                                <img src="{{F.profileimg.url}}" class="bg-gray-200 rounded-full w-10 h-10"
                                    style="object-fit: cover;">

                                <div class="flex flex-col">
                                    <span class="block capitalize font-semibold">{{F.user}} </span>
                                    <span class="block capitalize text-sm"> {{F.bio}} </span>
                                </div>
                            </div>

                            <a href="#" class="btn btn-outline-primary"> open chat</a>
                        </div>
                        {% endfor%}

                    </div> {% endcomment %}

                </div>

            </div>

        </div>


    </div>

    </div>

    </div>








    <!-- Scripts
    ================================================== -->
    <script src="{% static 'assets\js\tippy.all.min.js' %}"></script>
    <script src="{% static 'assets\js\jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'assets\js\uikit.js' %}"></script>
    <script src="{% static 'assets\js\simplebar.js' %}"></script>
    <script src="{% static 'assets\js\custom.js' %}"></script>
    <script src="{% static '../../unpkg.com/ionicons%405.2.3/dist/ionicons.js' %}"></script>
</body>


</html>